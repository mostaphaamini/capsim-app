(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{25731:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=s(23464).A.create({baseURL:"/api"})},57716:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var l=s(95155),n=s(12115),i=s(25731);function r(e){let{question:t,selected:s,onChange:n}=e,i="single"===t.type,r=(e,t)=>{i?n(e,!0):n(e,t)};return(0,l.jsxs)("div",{className:"border p-4 rounded mb-6",children:[(0,l.jsx)("h3",{className:"font-semibold mb-3",children:t.text}),(0,l.jsx)("div",{children:t.answers.map(e=>(0,l.jsxs)("label",{className:"flex items-center mb-2 cursor-pointer",children:[(0,l.jsx)("input",{type:i?"radio":"checkbox",name:"question-".concat(t.id),value:e.id,checked:s.includes(e.id),onChange:t=>r(e.id,t.target.checked),className:"mr-2"}),e.text]},e.id))})]})}function a(e){let{score:t,onClose:s}=e;return null===t?null:(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,l.jsxs)("div",{className:"bg-white p-8 rounded shadow-lg w-80 text-center",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Your Score"}),(0,l.jsxs)("p",{className:"text-4xl font-extrabold mb-6",children:[t,"%"]}),(0,l.jsx)("button",{onClick:s,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Close"})]})})}function d(){let[e,t]=(0,n.useState)([]),[s,d]=(0,n.useState)({}),[c,u]=(0,n.useState)(null),[o,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{i.A.get("/questions").then(e=>{t(e.data);let s={};e.data.forEach(e=>s[e.id]=[]),d(s)})},[]);let x=(t,s,l)=>{d(n=>{var i;let r=null!=(i=n[t])?i:[],a=e.find(e=>e.id===t);if(!a)return n;if("single"===a.type)return{...n,[t]:[s]};{let e=[...r];return l?e.push(s):e=e.filter(e=>e!==s),{...n,[t]:e}}})},h=e.every(e=>{var t;return(null==(t=s[e.id])?void 0:t.length)>0}),m=async()=>{if(!h)return void alert("Please answer all questions before submitting.");b(!0);let t={answers:e.map(e=>({questionId:e.id,selectedAnswerIds:s[e.id]}))};try{let e=await i.A.post("/submissions",t);u(e.data.score)}catch(e){alert("Error submitting quiz."),console.error(e)}finally{b(!1)}};return(0,l.jsxs)("div",{className:"max-w-3xl mx-auto p-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Capsim Quiz"}),e.map(e=>{var t;return(0,l.jsx)(r,{question:e,selected:null!=(t=s[e.id])?t:[],onChange:(t,s)=>x(e.id,t,s)},e.id)}),(0,l.jsx)("button",{disabled:!h||o,onClick:m,className:"bg-blue-600 text-white py-2 px-6 rounded ".concat(!h||o?"opacity-50 cursor-not-allowed":"hover:bg-blue-700"),children:o?"Submitting...":"Submit Quiz"}),(0,l.jsx)(a,{score:c,onClose:()=>u(null)})]})}},62175:(e,t,s)=>{Promise.resolve().then(s.bind(s,57716))}},e=>{var t=t=>e(e.s=t);e.O(0,[464,441,684,358],()=>t(62175)),_N_E=e.O()}]);